<div class="chat-container">
    <div class="chat-header">
        <div class="header-content">
            <button class="back-button">
                <span class="back-icon">←</span>
                Back
            </button>
            <h1 class="chat-title">Chat Title</h1>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span class="status-text">Online</span>
            </div>
        </div>
    </div>
    <div class="chat-messages">
        <div class="message">
            @for (message of messages(); track message) {
            @if (message) {
            <div class="message" [class.user-message]="message.role === 'user'"
                [class.assistant-message]="message.role === 'AI'">
                <div class="message-avatar">
                    <span class="user-avatar">{{ message.role }}</span>
                </div>
                <div class="message-content">
                    <div class="message-bubble">
                        <p>{{ message.content }}</p>
                    </div>
                    <div class="message-time">{{ message.date | date:'HH:mm' }}</div>
                </div>
            </div>
            }

            }
        </div>
    </div>
    <!-- AI is writing popup -->
    @if (loading()) {
    <div class="ai-writing-popup">
        <span class="typing-indicator">
            <span></span><span></span><span></span>
        </span>
        <span class="ai-writing-text">AI is writing…</span>
    </div>
    }
    <div class="chat-input-container">
        <input class="chat-input" type="text" placeholder="Type your message..." [(ngModel)]="userInput" />
        <button class="send-button" (click)="sendMessage()">
            <span class="send-icon">➤</span>
        </button>
    </div>
</div>