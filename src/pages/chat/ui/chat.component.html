<section class="chat-container">

    <header class="chat-header">
        <div class="header-content">
            <button class="back-button" routerLink="/">
                <span class="back-icon">←</span>
                Retour
            </button>
            <h1 class="chat-title">Chat</h1>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span class="status-text">En ligne</span>
            </div>
        </div>
    </header>
    <main class="chat-messages">
        <div class="message">
            @for (message of messages(); track message) {
            @if (message) {
            <app-message [message]="message"></app-message>
            }

            }
        </div>
        @if (error()) {
        <app-error message="Une erreur est survenue" />
        }

    </main>
    <!-- AI is writing popup -->
    @if (loading()) {
    <aside class="ai-writing-popup">
        <span class="typing-indicator">
            <span></span><span></span><span></span>
        </span>
        <span class="ai-writing-text">L'IA est en train de répondre…</span>
    </aside>
    }
    <aside class="chat-input-container">
        <input class="chat-input" type="text" placeholder="Tapez votre message..." [(ngModel)]="userInput" />
        <button [disabled]="loading()" class="send-button" (click)="sendMessage()">
            <span class="send-icon">➤</span>
        </button>

    </aside>


</section>